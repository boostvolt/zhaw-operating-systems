# 1 Linux Primer

## Introduction and Prerequisites

This laboratory is to:

- Learn how to setup a Lab Environment on the Cloud
- Learn the basic usage of Linux on the command line terminal

The following resources and tools are required for this laboratory session:

- Any modern web browser.
- Any modern SSH client application:
  - **Windows users¹:**
    - ssh client (OpenSSL) in Powershell
  - **Mac / Unix/Linux users:** ssh and ssh-keygen commands are needed
    - OpenSSL packages provide these
- OpenStack Horizon dashboard: <https://ned.cloudlab.zhaw.ch>
- OpenStack account details: please contact the lab assistant in case you already have not received your access credentials.

**Time**: The entire session will take 90 minutes.

## Task 1: Setup a Lab Environment

- Navigate to the OpenStack Horizon dashboard: <https://ned.cloudlab.zhaw.ch> (start VPN if not at ZHAW facilities) and use your credentials to login to the OpenStack Horizon dashboard.
- **NOTE:** if it's the first time you log in and you are using the default credentials provided, remember to change your password (drop down menu on top right next to the user name -> "settings", then "change password" menu on the left)

### Subtask 1.0

Watch the video instruction on Moodle and thereafter follow the instructions below.

### Subtask 1.1 Keypairs

Two options exist, on using a key-pair generated on your local PC or one generated by OpenStack.

**On OpenStack (recommended option)**

- Create an SSH key pair on OpenStack (under compute->keys) and download the private key (\*.pem) to your machine.
- Use your default ssh client (Win Powershell, Linux, Mac) to connect to the machine e.g.,:
  `ssh -i .ssh/demo_bsy.pem ubuntu@160.85.37.195`
  - **Note:** If you use Putty (unsupported in this lecture) on Windows you might need to convert the private (_.pem) key file into Putty's format (_.ppk). A guide on how to do this is here: <https://www.puttygen.com/convert-pem-to-ppk>
  - Convert the key to either SSH-1 or SSH-2 format (both should work)
  - Use Putty to connect

**On your local PC**

- **Windows users** - use the Powershell ssh command
- **Linux/Unix/Mac users**
  - Use `ssh-keygen` system utility in a terminal window to generate a key-pair
  - Use RSA as key pair type
  - By default, the generated key pair can be found within your `$HOME/.ssh/` directory.
  - The generated key pair has a public part (file typically ending with `pub` extension) and a private part which is meant never to be shared with anyone.
- **Register your public key with OpenStack**
  - Register your created key pair with your account.
  - Use Compute → Key Pairs → Import Key Pair
  - Import as "text". A public key contains no carriage returns and should look something like this:
    `ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDA5vud1PbY84kwgoxnyqCpI6IYH78VegMs2AKCWgP9..GqWrIDGxYF4FMiAkqS7X48a1K7i58TSF7tRh+FPvTb3F5KMcDvwRayZv3SfA/1HZOv77ID/i4NK7nGge1Yy4LZQbM26TtUdwJ7u4RwlFJERyza5w== blabla@blabla`

### Subtask 1.2 Understanding Resource Usage and Quotas

- Go to Compute → Overview page.
- Analyze what you see and discuss what quota is allocated for your project and how many VMs can you realistically create with such quota limitations.
- Check how many resources are already used, e.g. by previous sessions.

### Subtask 1.3 Create your VM

- Create the VM (Compute → Instances → Launch Instance) with a name of your choice, from a basic Ubuntu VM image (Boot Source → Image).
- Attach to the 'internal' network.
- Make sure the ssh key name and security groups (See instructions for NED on Moodle) are set correctly.
- Launch the VM.
- Once the VM is created, Associate a Floating IP.

### Subtask 1.4 Basic VM Management

- SSH to the VM² using your private SSH key. Create a file named "delta.txt"
- Try to stop and restart the VM
- Try suspending and resuming the VM.
- Is the file that was created still available once the VM is SSH'ed into?

## Task 2: Linux Primer

- Navigate to the OpenStack Horizon dashboard: <https://ned.cloudlab.zhaw.ch> (start VPN if not at ZHAW facilities) and use your credentials to login to the OpenStack Horizon dashboard.
- Get familiar with all the Linux command line tools introduced during the Lecture.

## Task 3: Cleanup - Stop the bills!

As Cloud Computing, IaaS in our case, is pay per use, you would be billed while your resources are created - even if not used. Prompt deletion of unused resources is a must. Otherwise you would pay for things that you are not using! The resources to be cleaned up include:

- Delete the VM.

## Additional Documentation

OpenStack Horizon documentation can be found on the following pages:

- User Guide: <https://docs.openstack.org/horizon/latest/>

---

¹Note that SSH is also available on Windows 10 through Windows Subsystem for Linux

²The username is 'ubuntu' e.g. `ssh -i $PRIV_KEY ubuntu@$IP_ADDRESS`
